<!DOCTYPE html>
<html>
<head>
    <title>ABION NEXUS Business AI</title>
      <!-- Favicon and App Icons -->
<link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
<link rel="manifest" href="./site.webmanifest">
<link rel="icon" type="image/png" sizes="192x192" href="./android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="./android-chrome-512x512.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-4 text-white">
                    <h1 class="text-xl font-bold">ABION NEXUS Business AI</h1>
                    <p class="text-sm opacity-80">Your local business intelligence assistant</p>
                </div>
                
                <div id="chat-messages" class="h-96 overflow-y-auto p-4">
                    <div class="flex items-start mb-4">
                        <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                            <i data-lucide="bot" class="w-4 h-4 text-indigo-600"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3">
                            <p class="text-sm">Hello! I'm your ABION NEXUS business assistant. How can I help you today?</p>
                        </div>
                    </div>
                </div>
                
                <div class="p-4 border-t">
                    <div class="flex">
                        <input 
                            type="text" 
                            id="user-input" 
                            placeholder="Ask about our automation services..." 
                            class="flex-1 border border-gray-300 rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        >
                        <button 
                            id="send-btn" 
                            class="bg-indigo-600 text-white px-6 py-2 rounded-r-lg hover:bg-indigo-700"
                        >
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const chatMessages = document.getElementById('chat-messages');

            async function sendMessage() {
                const message = userInput.value.trim();
                if (!message) return;

                // Add user message
                addMessage(message, true);
                userInput.value = '';

                try {
                    const response = await fetch('/api/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ message: message })
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        addMessage(data.response, false);
                    } else {
                        addMessage('Sorry, I encountered an error. Please try again.', false);
                    }
                } catch (error) {
                    addMessage('Connection error. Please check if the server is running.', false);
                }
            }

            function addMessage(message, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'flex items-start mb-4';
                
                if (isUser) {
                    messageDiv.innerHTML = `
                        <div class="ml-auto">
                            <div class="bg-indigo-600 text-white rounded-lg p-3 max-w-md">
                                <p class="text-sm">${message}</p>
                            </div>
                        </div>
                        <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center ml-3">
                            <i data-lucide="user" class="w-4 h-4 text-indigo-600"></i>
                        </div>
                    </div>
                `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                            <i data-lucide="bot" class="w-4 h-4 text-indigo-600"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-md">
                            <p class="text-sm">${message}</p>
                        </div>
                    `;
                }
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        });
    </script>
</body>
</html>